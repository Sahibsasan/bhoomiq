<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700;900&family=Work+Sans:wght@400;500;700;900&display=swap" rel="stylesheet"/>
<title>Stitch Design</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        colors: {
          primary: '#169c1d',
          'background-light': '#f6f8f6',
          'background-dark': '#112112',
        },
        fontFamily: {
          display: ['Work Sans'],
        },
        borderRadius: {
          DEFAULT: '0.25rem',
          lg: '0.5rem',
          xl: '0.75rem',
          full: '9999px',
        },
      },
    },
  }
</script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<style>
  body { min-height: max(884px, 100dvh); }
  /* Style for filled material icon */
  .material-symbols-outlined.filled {
    font-variation-settings: 'FILL' 1;
  }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
<div class="flex h-auto min-h-screen w-full flex-col justify-between">
<div class="flex-grow">

<header class="sticky top-0 z-20 flex items-center justify-between border-b border-primary/20 bg-background-light p-4 dark:bg-background-dark dark:border-primary/30">
    <a href="landing.html">
  <button class="flex items-center justify-center rounded-full p-2 hover:bg-primary/10">
    <span class="material-symbols-outlined text-gray-800 dark:text-gray-200">arrow_back</span>
  </button></a>
  <h1 class="flex-1 text-center text-xl font-bold text-gray-900 dark:text-white">Bazaar</h1>
  <div class="w-10">
      <button id="open-cart-btn" class="relative flex items-center justify-center rounded-full p-2 hover:bg-primary/10">
        <span class="material-symbols-outlined text-gray-800 dark:text-gray-200">shopping_cart</span>
        <span id="cart-count-badge" class="absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white hidden">0</span>
      </button>
  </div>
</header>

<main class="p-4">

<section class="mb-8">
<h2 class="mb-4 text-2xl font-bold text-gray-900 dark:text-white">Fertilizers</h2>
<div class="space-y-4">

  <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800">
    <div class="flex flex-col gap-1 max-w-[65%]">
      <p class="text-sm text-gray-500 dark:text-gray-400">10kg</p>
      <p class="text-lg font-bold text-gray-900 dark:text-white">Nitrogen Boost</p>
      <p class="text-base font-medium text-gray-700 dark:text-gray-300">₹1200</p>
      <button class="add-to-cart-btn mt-2 flex items-center justify-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90" data-id="1" data-name="Nitrogen Boost" data-price="1200">
        <span class="material-symbols-outlined text-base">add_shopping_cart</span>
        <span>Add to Cart</span>
      </button>
    </div>
    <div class="flex-shrink-0 ml-4 h-28 w-28 rounded-lg bg-gray-200 dark:bg-gray-700 bg-cover bg-center" style="background-image: url('https://i.imgur.com/example1.jpg');"></div>
  </div>

  <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800">
    <div class="flex flex-col gap-1 max-w-[65%]">
      <p class="text-sm text-gray-500 dark:text-gray-400">20kg</p>
      <p class="text-lg font-bold text-gray-900 dark:text-white">Phosphorus Power</p>
      <p class="text-base font-medium text-gray-700 dark:text-gray-300">₹2500</p>
      <button class="add-to-cart-btn mt-2 flex items-center justify-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90" data-id="2" data-name="Phosphorus Power" data-price="2500">
        <span class="material-symbols-outlined text-base">add_shopping_cart</span>
        <span>Add to Cart</span>
      </button>
    </div>
    <div class="flex-shrink-0 ml-4 h-28 w-28 rounded-lg bg-gray-200 dark:bg-gray-700 bg-cover bg-center" style="background-image: url('https://i.imgur.com/example2.jpg');"></div>
  </div>

</div>
</section>

<section class="mb-8">
<h2 class="mb-4 text-2xl font-bold text-gray-900 dark:text-white">Seeds</h2>
<div class="space-y-4">

  <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800">
    <div class="flex flex-col gap-1 max-w-[65%]">
      <p class="text-sm text-gray-500 dark:text-gray-400">1kg</p>
      <p class="text-lg font-bold text-gray-900 dark:text-white">Wheat Seeds</p>
      <p class="text-base font-medium text-gray-700 dark:text-gray-300">₹300</p>
      <button class="add-to-cart-btn mt-2 flex items-center justify-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90" data-id="3" data-name="Wheat Seeds" data-price="300">
        <span class="material-symbols-outlined text-base">add_shopping_cart</span>
        <span>Add to Cart</span>
      </button>
    </div>
    <div class="flex-shrink-0 ml-4 h-28 w-28 rounded-lg bg-gray-200 dark:bg-gray-700 bg-cover bg-center" style="background-image: url('https://i.imgur.com/example3.jpg');"></div>
  </div>

  <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow-sm dark:bg-gray-800">
    <div class="flex flex-col gap-1 max-w-[65%]">
      <p class="text-sm text-gray-500 dark:text-gray-400">500g</p>
      <p class="text-lg font-bold text-gray-900 dark:text-white">Rice Seeds</p>
      <p class="text-base font-medium text-gray-700 dark:text-gray-300">₹200</p>
      <button class="add-to-cart-btn mt-2 flex items-center justify-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90" data-id="4" data-name="Rice Seeds" data-price="200">
        <span class="material-symbols-outlined text-base">add_shopping_cart</span>
        <span>Add to Cart</span>
      </button>
    </div>
    <div class="flex-shrink-0 ml-4 h-28 w-28 rounded-lg bg-gray-200 dark:bg-gray-700 bg-cover bg-center" style="background-image: url('https://i.imgur.com/example4.jpg');"></div>
  </div>

</div>
</section>
</main>
</div>

<footer class="safe-area-inset-bottom sticky bottom-0 z-10 border-t border-primary/20 bg-background-light dark:border-primary/30 dark:bg-background-dark">
  <nav class="flex justify-around px-2 py-1">
    <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-lg py-2 text-gray-500 hover:bg-primary/10 dark:text-gray-400 dark:hover:bg-primary/20" href="#">
      <span class="material-symbols-outlined">home</span>
      <span class="text-xs font-medium">Home</span>
    </a>
    <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-lg bg-primary/10 py-2 text-primary dark:bg-primary/20" href="#">
      <span class="material-symbols-outlined filled">store</span>
      <span class="text-xs font-bold">Bazaar</span>
    </a>
    <a class="flex flex-1 flex-col items-center justify-center gap-1 rounded-lg py-2 text-gray-500 hover:bg-primary/10 dark:text-gray-400 dark:hover:bg-primary/20" href="#">
      <span class="material-symbols-outlined">settings</span>
      <span class="text-xs font-medium">Settings</span>
    </a>
  </nav>
</footer>
</div>

<div id="cart-panel-container" class="fixed inset-0 z-30 hidden">
    <div id="cart-backdrop" class="absolute inset-0 bg-black/60"></div>
    <div id="cart-panel" class="absolute right-0 top-0 h-full w-full max-w-md transform translate-x-full bg-background-light shadow-2xl transition-transform duration-300 ease-in-out dark:bg-background-dark flex flex-col">
        <header class="flex items-center justify-between border-b border-gray-200 p-4 dark:border-gray-700">
            <h2 class="text-xl font-bold text-gray-900 dark:text-white">Your Cart</h2>
            <button id="close-cart-btn" class="rounded-full p-2 hover:bg-gray-200 dark:hover:bg-gray-700">
                <span class="material-symbols-outlined">close</span>
            </button>
        </header>

        <div id="cart-items-container" class="flex-grow overflow-y-auto p-4 space-y-4">
            <div id="empty-cart-message" class="flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400">
                <span class="material-symbols-outlined text-6xl">shopping_cart</span>
                <p class="mt-4 text-lg">Your cart is empty</p>
                <p class="text-sm">Looks like you haven't added anything to your cart yet.</p>
            </div>
        </div>

        <footer class="border-t border-gray-200 p-4 dark:border-gray-700 space-y-4">
            <div class="flex justify-between items-center text-lg font-bold">
                <span class="text-gray-700 dark:text-gray-300">Subtotal:</span>
                <span id="cart-subtotal" class="text-gray-900 dark:text-white">₹0</span>
            </div>
            <button class="w-full rounded-full bg-primary py-3 text-lg font-bold text-white hover:bg-primary/90 disabled:opacity-50" id="checkout-btn" disabled>
                Proceed to Checkout
            </button>
        </footer>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const cartPanelContainer = document.getElementById('cart-panel-container');
    const cartPanel = document.getElementById('cart-panel');
    const openCartBtn = document.getElementById('open-cart-btn');
    const closeCartBtn = document.getElementById('close-cart-btn');
    const cartBackdrop = document.getElementById('cart-backdrop');
    const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
    const cartItemsContainer = document.getElementById('cart-items-container');
    const cartCountBadge = document.getElementById('cart-count-badge');
    const cartSubtotalEl = document.getElementById('cart-subtotal');
    const emptyCartMessage = document.getElementById('empty-cart-message');
    const checkoutBtn = document.getElementById('checkout-btn');

    let cart = [];

    // --- Core Functions ---
    const openCart = () => {
        cartPanelContainer.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Prevent background scroll
        setTimeout(() => {
            cartPanel.classList.remove('translate-x-full');
        }, 10);
    };

    const closeCart = () => {
        cartPanel.classList.add('translate-x-full');
        document.body.style.overflow = ''; // Restore scroll
        setTimeout(() => {
            cartPanelContainer.classList.add('hidden');
        }, 300); // Match transition duration
    };

    const updateCartUI = () => {
        // Clear current items
        cartItemsContainer.innerHTML = '';
        
        if (cart.length === 0) {
            cartItemsContainer.appendChild(emptyCartMessage);
            emptyCartMessage.style.display = 'flex';
        } else {
            emptyCartMessage.style.display = 'none';
            cart.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'flex items-center justify-between';
                itemEl.innerHTML = `
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-md bg-gray-200 dark:bg-gray-700 flex-shrink-0"></div>
                        <div>
                            <p class="font-bold text-gray-900 dark:text-white">${item.name}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">₹${item.price}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <button class="cart-quantity-change text-lg p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600" data-id="${item.id}" data-change="-1">-</button>
                        <span class="font-bold text-lg">${item.quantity}</span>
                        <button class="cart-quantity-change text-lg p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600" data-id="${item.id}" data-change="1">+</button>
                    </div>
                `;
                cartItemsContainer.appendChild(itemEl);
            });
        }

        // Update badge
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        if (totalItems > 0) {
            cartCountBadge.textContent = totalItems;
            cartCountBadge.classList.remove('hidden');
        } else {
            cartCountBadge.classList.add('hidden');
        }

        // Update subtotal
        const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        cartSubtotalEl.textContent = `₹${subtotal}`;
        
        // Enable/disable checkout button
        checkoutBtn.disabled = cart.length === 0;
    };

    const handleAddToCart = (e) => {
        const button = e.currentTarget;
        const id = button.dataset.id;
        const name = button.dataset.name;
        const price = parseInt(button.dataset.price, 10);

        const existingItem = cart.find(item => item.id === id);

        if (existingItem) {
            existingItem.quantity++;
        } else {
            cart.push({ id, name, price, quantity: 1 });
        }
        
        updateCartUI();
    };
    
    const handleQuantityChange = (id, change) => {
        const itemIndex = cart.findIndex(item => item.id === id);
        if (itemIndex > -1) {
            cart[itemIndex].quantity += change;
            if (cart[itemIndex].quantity <= 0) {
                cart.splice(itemIndex, 1); // Remove item if quantity is 0 or less
            }
        }
        updateCartUI();
    };

    // --- Event Listeners ---
    openCartBtn.addEventListener('click', openCart);
    closeCartBtn.addEventListener('click', closeCart);
    cartBackdrop.addEventListener('click', closeCart);

    addToCartButtons.forEach(button => {
        button.addEventListener('click', handleAddToCart);
    });
    
    cartItemsContainer.addEventListener('click', (e) => {
        if (e.target.closest('.cart-quantity-change')) {
            const button = e.target.closest('.cart-quantity-change');
            const id = button.dataset.id;
            const change = parseInt(button.dataset.change, 10);
            handleQuantityChange(id, change);
        }
    });
    
    // Initial UI update on page load
    updateCartUI();
});
</script>

</body>
</html>